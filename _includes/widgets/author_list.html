{%- comment -%}
Usage:
  authors:
    - Alice
    - Bob †
    - Yamei Li
功能：
  - 自动加粗 site.data.profile.primary_name（若无则默认 "Yamei Li"）
  - 支持 † 通讯作者，在末尾统一加注 († corresponding author)
  - 可在 _data/authors.yml 中配置 name/url/bold
{%- endcomment -%}

{%- assign authors = include.authors -%}
{%- assign has_corr = false -%}
{%- assign me = site.data.profile.primary_name | default: "Yamei Li" -%}

{%- for raw in authors -%}
  {%- assign is_corr = raw contains "†" -%}
  {%- assign key = raw | replace: "†","" | strip -%}

  {%- assign info = site.data.authors[key] -%}
  {%- assign name = info.name | default: key -%}

  {%- assign should_bold = false -%}
  {%- if info.bold == true or name == me -%}
    {%- assign should_bold = true -%}
  {%- endif -%}

  {%- capture html_name -%}
    {%- if should_bold -%}<strong>{{ name }}</strong>{%- else -%}{{ name }}{%- endif -%}
  {%- endcapture -%}

  {%- if info.url -%}
    <a class="text-body" target="_blank" href="{{ info.url }}">{{ html_name }}</a>
  {%- else -%}
    <span class="text-body">{{ html_name }}</span>
  {%- endif -%}

  {%- unless forloop.last -%}, {%- endunless -%}

  {%- if is_corr -%}{%- assign has_corr = true -%}{%- endif -%}
{%- endfor -%}

{%- if has_corr -%}
  <span class="badge badge-light ml-1">(† corresponding author)</span>
{%- endif -%}
